<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!--Plugin navbar-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.css" rel="stylesheet" />
    <!--Iconos Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!--mycss-->
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <!--iconos-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!--google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jacquard+24&display=swap" rel="stylesheet">
    <title>@ViewData["Title"] - Web Música</title>
</head>
<body id="page-top">
    <!--Nav-->
    <nav class="navbar navbar-expand-lg navbar-light py-3" id="mainNav">
        <div class="container">
            <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">Web Música</a>
            <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <a class="navbar-brand justify-content-center" href="#"><img src="~/img/icono/icono.png" alt="Logo" width="30" height="30"></a>
                <ul class="navbar-nav ms-auto my-2 my-lg-0">
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownArtistas" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Artistas
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownArtistas">
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Artistas" asp-action="Index">Indice</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Artistas" asp-action="IndexConsulta">Consulta</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownGrupos" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Grupos
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownConciertos">
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Grupoes" asp-action="Index">Indice</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="GruposArtistas" asp-action="Index">Listado Artistas</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Grupoes" asp-action="IndexConArtistas">Detalle Artistas</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="" asp-controller="Canciones" asp-action="Index">Canciones</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownConciertos" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Conciertos
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownConciertos">
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Conciertoes" asp-action="Index">Conciertos</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="ConciertosGrupoes" asp-action="Index">Grupos</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="CancionesConciertoes" asp-action="Index">Canciones</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Conciertoes" asp-action="IndexConsulta">Consulta</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="ConciertoVista" asp-action="Index">Vista Conciertos</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownAlbumes" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Albumes
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownAlbumes">
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Albumes" asp-action="Index">Indice</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Albumes" asp-action="IndexConsulta">Consulta</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownListas" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Listas
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownListas">
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="Listas" asp-action="Index">Indice</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" asp-area="" asp-controller="ListasCanciones" asp-action="Index">Canciones</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="" asp-controller="Usuarios" asp-action="Index">Usuarios</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Encabezado-->
    <main role="main" class="pb-3 colorFondo">
        @RenderBody()
    </main>
    <!--Pie de página-->
    <footer class="bg-light py-5 border-top footer text-muted">
        <div class="container px-4 px-lg-5"><div class="small text-center text-muted">Página Web creada por GrupoC &copy </div></div>
    </footer>
    <!--BootstrapJs-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!--Plugin Navbar e Imagenes-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/SimpleLightbox/2.1.0/simpleLightbox.min.js"></script>
    <!--MyJs-->
    <script src="~/js/site.js" asp-append-version="true"></script>
    <!--JQuery-->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <!--JQuery-->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script>
        if (navigator.userAgent.search("Firefox") >= 0) {
            $('#Filtro').addClass('scroll');
        }
    </script>
    <script>
        $(window).on("load", giveSize);
        $(window).on("resize", giveSize);
        function giveSize() {
            if ($(window).width() > 1200) {
                $('.carouselContenedor').removeClass("flex-wrap");
                $('.carouselImagen').css("width", $(window).width() / 2.2 + 'px');
                $('.carouselTexto').css("width", $(window).width() / 2.2 + 'px');
                $('.carouselImagen').css("height", $('.carouselImagen').width() / 1.3 + 'px');
                $('.carouselTexto').css("height", $('.carouselTexto').width() / 1.3 + 'px');
                $('.carouselTexto').css("font-size", ($('.carouselImagen').width() / 600) + 'em');
            } else {
                $('.carouselContenedor').addClass("flex-wrap");
                $('.carouselImagen').css("width", ($(window).width() - 50) + 'px');
                $('.carouselTexto').css("width", ($(window).width() - 50) + 'px');
                $('.carouselImagen').css("height", $('.carouselImagen').width() / 1.3 + 'px');
                $('.carouselTexto').css("height", (300000 / $('.carouselTexto').width()) + 'px');
                $('.carouselTexto').css("font-size", 1 + 'em');
            }
            $('.carouselImagen').css("font-size", ($('.carouselImagen').width() / 250) + 'em');
            $('#Filtro').css("height", ($(window).height() - 50 - $('.elIcono').height()) + "px");
            // $('#tituloCarousel').css("font-size", (($('#carouselImagen').width() / 500) < 1.3 ? 1.3 : $('#carouselImagen').width() / 900) + 'em');
    }
    </script>
    <script>
        $('.carousel-item').eq(0).addClass("active");
        setInterval(siguiente, 5000);
        $('#previo').on('click', previo);
        $('#siguiente').on('click', siguiente);
        function previo() {
            let posicion = 0;
            for (let i = 0; i < $('.carousel-item').length; i++) {
                if ($('.carousel-item').eq(i).hasClass('active')) posicion = i;
            }
            if (posicion != 0) {
                $('.carousel-item').eq(posicion).removeClass('active');
                $('.carousel-item').eq(posicion - 1).addClass('active');
            }else {
                $('.carousel-item').eq(0).removeClass('active');
                $('.carousel-item').eq($('.carousel-item').length - 1).addClass('active');
            }
        }
        function siguiente() {
            let posicion = 0;
            for (let i = 0; i < $('.carousel-item').length; i++) {
                if ($('.carousel-item').eq(i).hasClass('active')) posicion = i;
            }
            if (posicion != $('.carousel-item').length - 1) {
                $('.carousel-item').eq(posicion).removeClass('active');
                $('.carousel-item').eq(posicion + 1).addClass('active');
            }else {
                $('.carousel-item').eq($('.carousel-item').length - 1).removeClass('active');
                $('.carousel-item').eq(0).addClass('active');
            }
        }
    </script>
    <script>
        $('#Filtro').addClass("esconder");
        $("#Filtro").removeClass('d-flex');
        $('#Filtro').css("height", $(window).height() + "px");
        $(".filtroIcono").css({
            "position": "fixed",
            "left": "0px",
            "top":"50px",
            "z-index": "2"
        });
        $('.botonFiltro').on('click', function() {
            if ($('#Filtro').hasClass("esconder")) {
                $('#Filtro').removeClass("esconder");
                $('#Filtro').addClass("d-flex");
                $(".botonFiltro").addClass('botonFiltroClickado');
            }else {
                $(".botonFiltro").removeClass('botonFiltroClickado');
                $('#Filtro').addClass("esconder");
                $("#Filtro").removeClass('d-flex');
            }
        });
        $('#x').on('click', function () {
            if ($('.botonFiltro').hasClass('esconder')) {
                $('.botonFiltro').removeClass('esconder');
            } else {
                $('.botonFiltro').addClass('esconder');
                $(".botonFiltro").removeClass('botonFiltroClickado');
                $('#Filtro').addClass("esconder");
                $("#Filtro").removeClass('d-flex');
            }
        });
    </script>
    <script>
        $('.tarjeta').addClass('filtrado');
        $('#filtroNombreConcierto').on('change', function () {
            $('.tarjeta').addClass('filtrado');
            filtroPorTitulo();
            filtroPorLugar();
            filtroPorNombreGrupo();
            filtroPorPrecio();
            filtroPorFecha();
            paginacion();
        });
        $('#valoresLugares').on('change', function () {
            $('.tarjeta').addClass('filtrado');
            filtroPorTitulo();
            filtroPorLugar();
            filtroPorNombreGrupo();
            filtroPorPrecio();
            filtroPorFecha();
            paginacion();
        });
        $('#valoresGrupo').on('change', function () {
            $('.tarjeta').addClass('filtrado');
            filtroPorTitulo();
            filtroPorLugar();
            filtroPorNombreGrupo();
            filtroPorPrecio();
            filtroPorFecha();
            paginacion();
        });
        $('#filtroPrecioConcierto').on('change', function () {
            $('.tarjeta').addClass('filtrado');
            filtroPorTitulo();
            filtroPorLugar();
            filtroPorNombreGrupo();
            filtroPorPrecio();
            filtroPorFecha();
            paginacion();
        });
        $('#filtroFechaConcierto').on('change', function () {
            $('.tarjeta').addClass('filtrado');
            filtroPorTitulo();
            filtroPorLugar();
            filtroPorNombreGrupo();
            filtroPorPrecio();
            filtroPorFecha();
            paginacion();
        });
        $('#ConciertoReset').on('click', function () {
            $('.tarjeta').addClass('filtrado');
            paginacion();
        });
        function filtroPorTitulo() {
            for (let i = 0; i < $('.tarjeta').length; i++) {
                if (!$('.nombre').eq(i).text().toLowerCase().includes($('#filtroNombreConcierto').val().toLowerCase())) {
                    $('.tarjeta').eq(i).removeClass('filtrado');
                }
            }
        }
        function filtroPorLugar() {
            if (!($('#valoresLugares').val() == "Todos")) {
                for (let i = 0; i < $('.tarjeta').length; i++) {
                    if (!($('#valoresLugares').val() == $('.lugar').eq(i).text())) {
                        $('.tarjeta').eq(i).removeClass('filtrado');
                    }
                }
            } 
        }
        function filtroPorNombreGrupo() {
            if (!($('#valoresGrupo').val() == "Todos")) {
                for (let i = 0; i < $('.tarjeta').length; i++) {
                    if (!($('.nombreGrupo').eq(i).text().includes($('#valoresGrupo').val()))) {
                        $('.tarjeta').eq(i).removeClass('filtrado');
                    }
                }
            }
        }
        function filtroPorPrecio() {
            switch($('#igualdadPrecio').val()) {
                case "mayor": 
                    for (let i = 0; i < $('.tarjeta').length; i++) {
                        if (!(parseFloat($('.precio').eq(i).text()) > parseFloat($('#filtroPrecioConcierto').val()))) {
                            $('.tarjeta').eq(i).removeClass('filtrado');
                        }
                    }
                    break;
                case "igual": 
                    for (let i = 0; i < $('.tarjeta').length; i++) {
                        if (!(parseFloat($('.precio').eq(i).text()) == parseFloat($('#filtroPrecioConcierto').val()))) {
                            $('.tarjeta').eq(i).removeClass('filtrado');
                        }
                    }
                    break;
                case "menor":
                    for (let i = 0; i < $('.tarjeta').length; i++) {
                        if (!(parseFloat($('.precio').eq(i).text()) < parseFloat($('#filtroPrecioConcierto').val()))) {
                            $('.tarjeta').eq(i).removeClass('filtrado');
                        }
                    }
                    break;
                default: break;
            }
        }
        function filtroPorFecha() {
            switch ($('#igualdadFecha').val()) {
                case "mayor":
                    for (let i = 0; i < $('.tarjeta').length; i++) {
                        if (!(createDate($('.fecha').eq(i).text().substring(0, 10)).getTime() > crearFecha($('#filtroFechaConcierto').val()).getTime())) {
                            $('.tarjeta').eq(i).removeClass('filtrado');
                        }
                    }
                    break;
                case "igual":
                    for (let i = 0; i < $('.tarjeta').length; i++) {
                        if (!(createDate($('.fecha').eq(i).text().substring(0, 10)).getTime() == crearFecha($('#filtroFechaConcierto').val()).getTime())) {
                            $('.tarjeta').eq(i).removeClass('filtrado');
                        }
                    }
                    break;
                case "menor":
                    for (let i = 0; i < $('.tarjeta').length; i++) {
                        if (!(createDate($('.fecha').eq(i).text().substring(0, 10)).getTime() < crearFecha($('#filtroFechaConcierto').val()).getTime())) {
                            $('.tarjeta').eq(i).removeClass('filtrado');
                        }
                    }
                    break;
                default: break;
            }
        }
        function createDate(fecha) {
            let arrayFecha = fecha.split('/');
            return new Date(arrayFecha[1] + "/" + arrayFecha[0] + "/" + arrayFecha[2]);
        }
        function crearFecha(fecha) {
            let arrayFecha = fecha.split('-');
            return new Date(arrayFecha[1] + "/" + arrayFecha[2] + "/" + arrayFecha[0]);
        }
    </script>
    <script>
        paginacion();
        $(window).on('resize', paginacion);
        function paginacion() {
            if ($('#contenedorTarjetas .tarjeta').eq(0).length > 0) {
                $('.paginas').html('');
                $('.paginas').css('margin-left', $('#contenedorTarjetas .tarjeta').eq(0).offset().left + 'px');
                for (let i = 0; i < ($('#contenedorTarjetas .tarjeta').filter('.filtrado').length / 8); i++) {
                    $('.paginas').append(`<button class="pagina" style="width: 50px;height:50px;background-color:red;color:white;margin-right:8px;">${i}</button>`);
                }
                $('.paginas .pagina').eq(0).css('background-color', 'black');
                $('.tarjeta').hide();
                for (let i = 0; i < 8; i++) {
                    $('.tarjeta').filter('.filtrado').eq(i).show();
                }

                $('.paginas .pagina').on('click',irAPagina);
            } 
            function irAPagina() {
                $('.tarjeta').hide();
                for (let i = (parseInt($(this).text())) * 8; i < (parseInt($(this).text()) + 1) * 8; i++) {
                        $('.tarjeta').filter('.filtrado').eq(i).show();
                }
                $('.paginas .pagina').css('background-color', 'red');
                $(this).css('background-color', 'black');
            }
        }
    </script>
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
